{"title":"phpMyAdmin","date":"2020-03-07T01:44:19.000Z","date_formatted":{"ll":"2020年3月7日","L":"2020/03/07","MM-DD":"03-07"},"link":"2020/03/07/phpMyAdmin","tags":["环境配置"],"categories":["开发"],"updated":"2023-03-25T08:50:14.371Z","content":"<h2 id=\"phpmyadmin\">phpMyAdmin<a title=\"#phpmyadmin\" href=\"#phpmyadmin\"></a></h2>\n<blockquote>\n<p>phpMyAdmin配置的琐碎细节，介于ArchWiki对于本菜鸡而言具有一定迷惑性</p>\n</blockquote>\n<p>简单说明:</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    phpMyAdmin 是 MySQL 的一款第三方 WEB 客户端。由 Server 机提供(可</span><br><span class=\"line\">能不限于此种形式)服务，需要手动设置 http/https 服务(这就触及我的知识</span><br><span class=\"line\">盲区了)</span><br><span class=\"line\">    环境：Manjaro(Arch)</span><br><span class=\"line\">    (特声明默认PHP版本为7)</span><br></pre></td></tr></table></figure>\n<h3 id=\"服务配置\">服务配置<a title=\"#服务配置\" href=\"#服务配置\"></a></h3>\n<p>ArchWik 给提供了很多方案(确实让我等菜鸡有点迷)，我选了这一套：</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apache + php-fpm</span><br></pre></td></tr></table></figure>\n<h4 id=\"文件细则\">文件细则<a title=\"#文件细则\" href=\"#文件细则\"></a></h4>\n<ul>\n<li>/etc/php/php.ini 取消这两行注释：</li>\n</ul>\n<blockquote>\n<p>视实际情况而定</p>\n</blockquote>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">extension=pdo_mysql.so</span><br><span class=\"line\">extension=mysqli.so</span><br></pre></td></tr></table></figure>\n<h4 id=\"apache配置\">Apache配置<a title=\"#apache配置\" href=\"#apache配置\"></a></h4>\n<ul>\n<li>创建 Apache 配置文件：</li>\n</ul>\n<blockquote>\n<p>如果只想从本地访问 phpMyAdmin，将 Require all granted 改为 Require local</p>\n</blockquote>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/httpd/conf/extra/phpmyadmin.conf</span><br><span class=\"line\">----------------------------------------------------------------</span><br><span class=\"line\">Alias /phpmyadmin &quot;/usr/share/webapps/phpMyAdmin&quot;</span><br><span class=\"line\">&lt;Directory &quot;/usr/share/webapps/phpMyAdmin&quot;&gt;</span><br><span class=\"line\">    DirectoryIndex index.php</span><br><span class=\"line\">    AllowOverride All</span><br><span class=\"line\">    Options FollowSymlinks</span><br><span class=\"line\">    Require all granted</span><br><span class=\"line\">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>在 /etc/httpd/conf/httpd.conf 加入配置：</li>\n</ul>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># phpMyAdmin configuration</span><br><span class=\"line\">Include conf/extra/phpmyadmin.conf</span><br></pre></td></tr></table></figure>\n<p>Apache 使用 PHP 的方式也有很多种，我选择 php-fpm</p>\n<ul>\n<li>启用代理模块</li>\n</ul>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/httpd/conf/httpd.conf</span><br><span class=\"line\">---------------------------------------------------------------</span><br><span class=\"line\">LoadModule proxy_module modules/mod_proxy.so</span><br><span class=\"line\">LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so</span><br></pre></td></tr></table></figure>\n<ul>\n<li>创建文件</li>\n</ul>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/httpd/conf/extra/php-fpm.conf</span><br><span class=\"line\">--------------------------------------------------------------</span><br><span class=\"line\">DirectoryIndex index.php index.html</span><br><span class=\"line\">&lt;FilesMatch \\.php$&gt;</span><br><span class=\"line\">    SetHandler &quot;proxy:unix:/run/php-fpm/php-fpm.sock|fcgi://localhost/&quot;</span><br><span class=\"line\">&lt;/FilesMatch&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>在 /etc/httpd/conf/httpd.conf 加入配置：</li>\n</ul>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Include conf/extra/php-fpm.conf</span><br></pre></td></tr></table></figure>\n<p>重启 httpd 服务，端口被占用就把该进程杀掉</p>\n<ul>\n<li>测试 PHP 可用性，在 apache 文档根目录（即 /srv/http/ 或 ~public_html ）中写入：</li>\n</ul>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test.php</span><br><span class=\"line\">-------------------------------------------------------------</span><br><span class=\"line\"><span class=\"meta\">&lt;?php</span> <span class=\"title function_ invoke__\">phpinfo</span>(); <span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>访问 <a href=\"http://localhost/test.php\" target=\"_blank\">http://localhost/test.php</a> 或者 <a href=\"http://localhost/~myname/test.php\" target=\"_blank\">http://localhost/~myname/test.php</a> 即可看到有关PHP的详细信息</p>\n<p>访问 <a href=\"http://localhost/phpmyadmin/\" target=\"_blank\">http://localhost/phpmyadmin/</a> 使用 phpMyAdmin</p>\n<ul>\n<li>懒人桌面启动器：</li>\n</ul>\n<blockquote>\n<p>图标是内置的，也可以找一张丢在 /opt</p>\n</blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">phpmyadmin.desktop</span><br><span class=\"line\">------------------------------------------------------------</span><br><span class=\"line\">[Desktop Entry]</span><br><span class=\"line\">Name=phpMyAdmin</span><br><span class=\"line\">Comment=MySQLClient</span><br><span class=\"line\">Comment[zh_CN]=MySQL客户端</span><br><span class=\"line\">#Keywords=</span><br><span class=\"line\">Exec=chromium localhost/phpmyadmin %u</span><br><span class=\"line\">#TryExec=</span><br><span class=\"line\">Terminal=false</span><br><span class=\"line\">Icon=phpmyadmin</span><br><span class=\"line\">Type=Application</span><br><span class=\"line\">Categories=Development;SQLClient;</span><br><span class=\"line\">#MimeType=</span><br><span class=\"line\">StartupNotify=true</span><br><span class=\"line\">#StartupWMClass=</span><br><span class=\"line\">#OnlyShowIn=</span><br><span class=\"line\">Actions=new-window;</span><br></pre></td></tr></table></figure>\n<h4 id=\"ssl/tls支持\">SSL/TLS支持<a title=\"#ssl/tls支持\" href=\"#ssl/tls支持\"></a></h4>\n<blockquote>\n<p>先刨坑儿</p>\n</blockquote>\n<p>更多细节参见 <a href=\"https://wiki.archlinux.org/index.php/PhpMyAdmin\" target=\"_blank\">https://wiki.archlinux.org/index.php/PhpMyAdmin</a></p>\n","prev":{"title":"JavaWeb","link":"2020/05/18/JavaWeb"},"next":{"title":"FYD","link":"2019/11/10/fack"},"plink":"https://user-hrsat.github.io/2020/03/07/phpMyAdmin/","toc":[{"id":"phpmyadmin","title":"phpMyAdmin","index":"1","children":[{"id":"服务配置","title":"服务配置","index":"1.1"}]}],"copyright":{"author":"User-Hrsat","link":"<a href=\"https://user-hrsat.github.io/2020/03/07/phpMyAdmin/\" title=\"phpMyAdmin\">https://user-hrsat.github.io/2020/03/07/phpMyAdmin/</a>","license":"自由转载-非商用-禁止演绎-保持署名 (<a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh\">CC BY-NC-ND 4.0</a>)","updated":"2023年3月25日"}}