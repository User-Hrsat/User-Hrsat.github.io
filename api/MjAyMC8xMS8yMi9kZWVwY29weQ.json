{"title":"浅拷贝与深拷贝","date":"2020-11-22T10:25:51.000Z","date_formatted":{"ll":"2020年11月22日","L":"2020/11/22","MM-DD":"11-22"},"link":"2020/11/22/deepcopy","tags":["Python","基础"],"categories":["基础"],"updated":"2020-11-22T10:25:51.000Z","content":"<h2 id=\"浅拷贝与深拷贝\">浅拷贝与深拷贝<a title=\"#浅拷贝与深拷贝\" href=\"#浅拷贝与深拷贝\"></a></h2>\n<h3 id=\"引导\">引导<a title=\"#引导\" href=\"#引导\"></a></h3>\n<blockquote>\n<p>如下两段代码:</p>\n</blockquote>\n<ul>\n<li>其一</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dic0 = &#123;<span class=\"string\">&#x27;init&#x27;</span> : [[], []]&#125;</span><br><span class=\"line\">dic1 = &#123;<span class=\"string\">&#x27;init&#x27;</span> : &#123;<span class=\"string\">&#x27;sender&#x27;</span> : []&#125;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">group = [<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> group:</span><br><span class=\"line\">    <span class=\"keyword\">if</span> i <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> dic0:</span><br><span class=\"line\">        dic0[i] = dic0[<span class=\"string\">&#x27;init&#x27;</span>]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> i <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> dic1:</span><br><span class=\"line\">        dic1[i] = dic1[<span class=\"string\">&#x27;init&#x27;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">dic0[<span class=\"number\">0</span>][<span class=\"number\">0</span>].append(<span class=\"string\">&#x27;sender&#x27;</span>)</span><br><span class=\"line\">dic0[<span class=\"number\">0</span>][<span class=\"number\">1</span>].append(<span class=\"string\">&#x27;message&#x27;</span>)</span><br><span class=\"line\">dic1[<span class=\"number\">0</span>][<span class=\"string\">&#x27;sender&#x27;</span>].append(<span class=\"string\">&#x27;message&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;dic0&#125;</span>\\n<span class=\"subst\">&#123;dic1&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>其二</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dic0 = &#123;<span class=\"string\">&#x27;init&#x27;</span> : [[], []]&#125;</span><br><span class=\"line\">dic1 = &#123;<span class=\"string\">&#x27;init&#x27;</span> : &#123;<span class=\"string\">&#x27;sender&#x27;</span> : []&#125;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">group = [<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> group:</span><br><span class=\"line\">    <span class=\"keyword\">if</span> i <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> dic0:</span><br><span class=\"line\">        dic0[i] = [[], []]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> i <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> dic1:</span><br><span class=\"line\">        dic1[i] = &#123;<span class=\"string\">&#x27;sender&#x27;</span> : []&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">dic0[<span class=\"number\">0</span>][<span class=\"number\">0</span>].append(<span class=\"string\">&#x27;sender&#x27;</span>)</span><br><span class=\"line\">dic0[<span class=\"number\">0</span>][<span class=\"number\">1</span>].append(<span class=\"string\">&#x27;message&#x27;</span>)</span><br><span class=\"line\">dic1[<span class=\"number\">0</span>][<span class=\"string\">&#x27;sender&#x27;</span>].append(<span class=\"string\">&#x27;message&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;dic0&#125;</span>\\n<span class=\"subst\">&#123;dic1&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>输出如下:</p>\n</blockquote>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">其一</span><br><span class=\"line\">&#123;&#x27;init&#x27;: [[&#x27;sender&#x27;], [&#x27;message&#x27;]], 0: [[&#x27;sender&#x27;], [&#x27;message&#x27;]], 1: [[&#x27;sender&#x27;], [&#x27;message&#x27;]], 2: [[&#x27;sender&#x27;], [&#x27;message&#x27;]]&#125;</span><br><span class=\"line\">&#123;&#x27;init&#x27;: &#123;&#x27;sender&#x27;: [&#x27;message&#x27;]&#125;, 0: &#123;&#x27;sender&#x27;: [&#x27;message&#x27;]&#125;, 1: &#123;&#x27;sender&#x27;: [&#x27;message&#x27;]&#125;, 2: &#123;&#x27;sender&#x27;: [&#x27;message&#x27;]&#125;&#125;</span><br><span class=\"line\">其二</span><br><span class=\"line\">&#123;&#x27;init&#x27;: [[], []], 0: [[&#x27;sender&#x27;], [&#x27;message&#x27;]], 1: [[], []], 2: [[], []]&#125;</span><br><span class=\"line\">&#123;&#x27;init&#x27;: &#123;&#x27;sender&#x27;: []&#125;, 0: &#123;&#x27;sender&#x27;: [&#x27;message&#x27;]&#125;, 1: &#123;&#x27;sender&#x27;: []&#125;, 2: &#123;&#x27;sender&#x27;: []&#125;&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>只有其二得到了预想中的效果</p>\n<p>为什么？</p>\n<p>其一的代码从逻辑上看起来并没有问题啊！</p>\n<p>为什么得不到预期的结果？</p>\n</blockquote>\n<h3 id=\"为什么？\">为什么？<a title=\"#为什么？\" href=\"#为什么？\"></a></h3>\n<ul>\n<li>参考：</li>\n</ul>\n<p>浅拷贝与深拷贝 - 浪里行舟的文章 - 知乎：<a href=\"https://zhuanlan.zhihu.com/p/56741046\" target=\"_blank\">https://zhuanlan.zhihu.com/p/56741046</a></p>\n<p>Python中的赋值(复制)、浅拷贝与深拷贝 - 晚来天御雪的文章 - 知乎：<a href=\"https://zhuanlan.zhihu.com/p/54011712\" target=\"_blank\">https://zhuanlan.zhihu.com/p/54011712</a></p>\n<p>5张图彻底理解Python中的浅拷贝与深拷贝 - 张小鸡的文章 - 知乎：<a href=\"https://zhuanlan.zhihu.com/p/57893374\" target=\"_blank\">https://zhuanlan.zhihu.com/p/57893374</a></p>\n","prev":{"title":"SQL要点","link":"2022/05/10/SQL要点"},"next":{"title":"Django","link":"2020/09/08/Django"},"plink":"https://user-hrsat.github.io/2020/11/22/deepcopy/","toc":[{"id":"浅拷贝与深拷贝","title":"浅拷贝与深拷贝","index":"1","children":[{"id":"引导","title":"引导","index":"1.1"},{"id":"为什么？","title":"为什么？","index":"1.2"}]}],"copyright":{"author":"User-Hrsat","link":"<a href=\"https://user-hrsat.github.io/2020/11/22/deepcopy/\" title=\"浅拷贝与深拷贝\">https://user-hrsat.github.io/2020/11/22/deepcopy/</a>","license":"自由转载-非商用-禁止演绎-保持署名 (<a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh\">CC BY-NC-ND 4.0</a>)","updated":"2020年11月22日"}}